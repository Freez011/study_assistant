<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Assistant - –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="dashboard">
        <div class="dashboard-header">
            <h1>Study Assistant</h1>
            <div class="user-info">
                <a href="profile.html" class="profile-link" style="display: flex; align-items: center; gap: 10px; text-decoration: none; color: inherit;">
                    <div style="width: 40px; height: 40px; border-radius: 50%; overflow: hidden; background: var(--primary); display: flex; align-items: center; justify-content: center;">
                        <img id="profile-avatar" src="" alt="Avatar" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                        <i class="fas fa-user-circle" id="default-avatar" style="font-size: 40px; color: white;"></i>
                    </div>
                    <span id="username"></span>
                </a>
                <button id="logout-btn"><i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏</button>
            </div>
        </div>

        <div class="sections-grid">
            <a href="search.html" class="section-card">
                <div class="section-icon"><i class="fas fa-search"></i></div>
                <h3>–ü–æ–∏—Å–∫ –ø–æ —Ç–µ–æ—Ä–∏–∏</h3>
                <p>–ù–∞–π—Ç–∏ –ª—é–±—É—é —Ç–µ–º—É –ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º</p>
            </a>
            <a href="discrete-math.html" class="section-card">
                <div class="section-icon"><i class="fas fa-infinity"></i></div>
                <h3>–î–∏—Å–∫—Ä–µ—Ç–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞</h3>
                <p>–ú–Ω–æ–∂–µ—Å—Ç–≤–∞, –æ–ø–µ—Ä–∞—Ü–∏–∏, –∑–∞–¥–∞—á–∏</p>
            </a>
            <a href="calculus.html" class="section-card">
                <div class="section-icon"><i class="fas fa-chart-line"></i></div>
                <h3>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</h3>
                <p>–ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ, –∏–Ω—Ç–µ–≥—Ä–∞–ª—ã</p>
            </a>
            <a href="programming.html" class="section-card">
                <div class="section-icon"><i class="fas fa-code"></i></div>
                <h3>–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Python</h3>
                <p>–¢–µ–æ—Ä–∏—è, –∑–∞–¥–∞—á–∏, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞</p>
            </a>
            <a href="english.html" class="section-card">
                <div class="section-icon"><i class="fas fa-language"></i></div>
                <h3>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫</h3>
                <p>–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞, —Å–ª–æ–≤–∞</p>
            </a>
            <a href="history.html" class="section-card">
                <div class="section-icon"><i class="fas fa-landmark"></i></div>
                <h3>–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏</h3>
                <p>–î–∞—Ç—ã, —Å–æ–±—ã—Ç–∏—è</p>
            </a>
            <a href="ocr.html" class="section-card">
                <div class="section-icon"><i class="fas fa-images"></i></div>
                <h3>–ú–æ–∏ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã</h3>
                <p>–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ —Ä–µ—à–µ–Ω–∏—è</p>
            </a>
            <a href="favorites.html" class="section-card">
                <div class="section-icon"><i class="fas fa-star"></i></div>
                <h3>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h3>
                <p>–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ç–µ–º—ã –∏ –∑–∞–º–µ—Ç–∫–∏</p>
            </a>
        </div>
    </div>

    <!-- –í–∏–¥–∂–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
    <div class="feedback-widget">
        <!-- –ö–Ω–æ–ø–∫–∞-–∏–∫–æ–Ω–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è -->
        <div class="feedback-toggle" id="feedbackToggle">
            <i class="fas fa-comment"></i>
        </div>
        <!-- –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
        <div class="feedback-form" id="feedbackFormContainer">
            <div class="feedback-form-header">
                <h3>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h3>
                <button class="feedback-close" id="feedbackClose">&times;</button>
            </div>
            <form id="feedbackForm">
                <div class="form-group">
                    <label for="name"><i class="fas fa-user"></i> –ò–º—è</label>
                    <input type="text" id="name" class="feedback-input" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" required>
                </div>
                <div class="form-group">
                    <label for="email"><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" id="email" class="feedback-input" placeholder="ivan@example.com" required>
                </div>
                <div class="form-group">
                    <label for="message"><i class="fas fa-comment"></i> –°–æ–æ–±—â–µ–Ω–∏–µ</label>
                    <textarea id="message" class="feedback-input" rows="4" required></textarea>
                </div>
                <button type="submit" class="btn-primary btn-ripple" id="submitBtn"><i class="fab fa-telegram-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="notification" class="notification"></div>

    <footer class="site-footer">
        <div class="footer-content">
            <span>¬© 2026 Study Assistant</span>
            <span>üìû +7 (933) 234-50-04</span>
            <a href="https://t.me/freezqwx" target="_blank" class="telegram-link">
                <i class="fab fa-telegram-plane"></i> @freezqwx
            </a>
        </div>
    </footer>

    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser) {
            window.location.href = 'index.html';
        }

        const profileData = JSON.parse(localStorage.getItem(`profile_${currentUser}`)) || {};
        const usernameSpan = document.getElementById('username');
        if (profileData.firstName || profileData.lastName) {
            usernameSpan.textContent = `${profileData.firstName || ''} ${profileData.lastName || ''}`.trim();
        } else {
            usernameSpan.textContent = currentUser;
        }

        const avatarImg = document.getElementById('profile-avatar');
        const defaultIcon = document.getElementById('default-avatar');
        if (profileData.avatar) {
            avatarImg.src = profileData.avatar;
            avatarImg.style.display = 'block';
            defaultIcon.style.display = 'none';
        } else {
            avatarImg.style.display = 'none';
            defaultIcon.style.display = 'block';
        }

        document.getElementById('logout-btn').addEventListener('click', () => {
            localStorage.removeItem('currentUser');
            window.location.href = 'index.html';
        });
    </script>
    <script src="js/apply-theme.js"></script>
    <script src="js/auth.js"></script>

    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
    <script>
        const TELEGRAM_LINK = 'https://t.me/freezqwx';

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            setTimeout(() => {
                notification.className = 'notification';
            }, 4000);
        }

        function sendToTelegram(name, email, message) {
            const prefix = 'üì© –ù–û–í–û–ï –°–û–û–ë–©–ï–ù–ò–ï –° –°–ê–ô–¢–ê STUDY ASSISTANT';
            const formattedMessage = `${prefix}%0A%0Aüë§ –ò–º—è: ${encodeURIComponent(name)}%0Aüìß Email: ${encodeURIComponent(email)}%0Aüí¨ –°–æ–æ–±—â–µ–Ω–∏–µ: ${encodeURIComponent(message)}%0A%0A‚è∞ –í—Ä–µ–º—è: ${encodeURIComponent(new Date().toLocaleString('ru-RU'))}%0Aüîó –°–∞–π—Ç: Study Assistant`;
            const telegramUrl = `${TELEGRAM_LINK}?text=${formattedMessage}`;
            window.open(telegramUrl, '_blank');
            return true;
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–º
        const toggleBtn = document.getElementById('feedbackToggle');
        const formContainer = document.getElementById('feedbackFormContainer');
        const closeBtn = document.getElementById('feedbackClose');

        toggleBtn.addEventListener('click', () => {
            formContainer.classList.add('active');
            toggleBtn.style.display = 'none';
        });

        closeBtn.addEventListener('click', () => {
            formContainer.classList.remove('active');
            toggleBtn.style.display = 'flex';
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        document.getElementById('feedbackForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const message = document.getElementById('message').value.trim();

            if (!name || !email || !message) {
                showNotification('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã', 'error');
                return;
            }

            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Telegram...';
            submitBtn.disabled = true;

            try {
                sendToTelegram(name, email, message);
                showNotification('‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Telegram! –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ', 'success');
                setTimeout(() => {
                    document.getElementById('feedbackForm').reset();
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    // –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤–µ—Ä–Ω—É—Ç—å —Ñ–æ—Ä–º—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                    // formContainer.classList.remove('active');
                    // toggleBtn.style.display = 'flex';
                }, 3000);
            } catch (error) {
                showNotification('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏', 'error');
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        });
    </script>
</body>
</html>